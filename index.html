<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <title>ACNH item id lookup (Multi-language)</title>

  <!-- Bootstrap core CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
  </style>


  <!-- Custom styles for this template -->
  <link href="style.css" rel="stylesheet">
</head>

<body>
  <div id="app" v-cloak>
    <header class="navbar bg-dark sticky-top flex-md-nowrap p-0 shadow navbar-expand-sm" data-bs-theme="dark">
      <span class="navbar-brand col-md-3 col-lg-2 me-0 px-3">{{ title }}</span>
      <div class="navbar-nav flex-row ms-auto">
        <span data-bs-toggle="tooltip" data-bs-placement="bottom" title="Import from list">
          <button class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#importModal">
            <i class="bi-plus-lg" aria-hidden="true"></i>
          </button>
        </span>
        <div class="dropdown">
          <button class="btn btn-dark dropdown-toggle d-flex align-items-center" id="bd-theme" type="button"
            aria-expanded="false" data-bs-toggle="dropdown" aria-label="Toggle theme (auto)">
            <i class="bi-circle-half theme-icon-active" aria-hidden="true"></i>
            <span class="visually-hidden" id="bd-theme-text">Toggle theme</span>
          </button>
          <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="bd-theme-text">
            <li>
              <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light"
                aria-pressed="false">
                <i class="bi-sun-fill me-2" aria-hidden="true"></i>
                Light
                <i class="bi-check2 ms-auto d-none" aria-hidden="true"></i>
              </button>
            </li>
            <li>
              <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark"
                aria-pressed="false">
                <i class="bi-moon-stars-fill me-2" aria-hidden="true"></i>
                Dark
                <i class="bi-check2 ms-auto d-none" aria-hidden="true"></i>
              </button>
            </li>
            <li>
              <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto"
                aria-pressed="true">
                <i class="bi-circle-half me-2" aria-hidden="true"></i>
                Auto
                <i class="bi-check2 ms-auto d-none" aria-hidden="true"></i>
              </button>
            </li>
          </ul>
        </div>
        <button class="btn btn-dark" @click="scrollToTop" data-bs-toggle="tooltip" data-bs-placement="bottom"
          title="Back to top">
          <i class="bi-chevron-up" aria-hidden="true"></i>
        </button>
        <span class="d-md-none" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Toggle side menu">
          <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu"
            aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        </span>
      </div>
    </header>

    <div class="container-fluid">
      <div class="row">
        <nav id="sidebarMenu" class="col-md-3 d-md-block sidebar collapse overflow-auto">
          <div class="position-sticky d-flex flex-column h-100">
            <div class="p-3 mb-3 border-bottom">
              <span class="fs-5 fw-semibold">Side Menu</span>
            </div>

            <div class="px-3 mb-3 border-bottom" v-if="!loading.any">
              <h6 class="sidebar-heading d-flex justify-content-between align-items-center mb-1 text-muted">
                <button class="btn p-0 text-muted text-uppercase" type="button" data-bs-toggle="collapse"
                  data-bs-target="#selectedCollapse" aria-expanded="false" aria-controls="selectedCollapse">
                  Selected <template v-if="selected.items.length+selected.diys.length > 0">
                    ({{selected.items.length + selected.diys.length }})
                  </template>
                </button>
                <button class="ms-2 btn btn-sm" @click="selected.items = []; selected.diys = [];"
                  aria-label="Clear selected">
                  <i class="bi-x" aria-hidden="true"></i>
                </button>
              </h6>
              <div id="selectedCollapse" class="collapse show">
                <ul class="list-group list-group-flush">
                  <li v-for="index in Math.ceil(selected.items.length / pref.item.splitBy)" style="background: inherit;"
                    class="list-group-item px-0">
                    <div class="d-flex justify-content-between align-items-start">
                      <input v-model="pref.item.itemPrefix" type="text" style="max-width: 100%;"
                        class="form-control form-control-sm transparent-textbox w-100" placeholder="Items:">
                      <button class="ms-2 btn" @click="copy(pref.item.itemPrefix + ' ' + selection.join(selection.splited.items[index - 1])); 
                  selected.items.splice((index - 1) * pref.item.splitBy, pref.item.splitBy);">
                        <i class="bi-clipboard" aria-hidden="true"></i>
                      </button>
                    </div>
                    <div class="d-flex flex-wrap">
                      <button v-for="(ids, j) in selection.splited.items[index - 1]" data-bs-toggle="tooltip"
                        data-bs-placement="bottom"
                        :class="['btn', 'px-1', 'py-0', {'variants-available': variantsAvailable(ids), 'fabrics-available': fabricsAvailable(ids)}]"
                        type="button" @click="changeItemVariant(index - 1, j)"
                        :title="search.byId(ids[3]).name + otherInformation(search.byId(ids[3]), ids)">
                        {{ trimItemId(ids) }}</button>
                    </div>
                  </li>

                  <li v-for="index in Math.ceil(selected.diys.length / pref.item.splitBy)" style="background: inherit;"
                    class="list-group-item px-0">
                    <div class="d-flex justify-content-between align-items-start">
                      <input v-model="pref.item.diyPrefix" type="text" style="max-width: 100%;"
                        class="form-control form-control-sm transparent-textbox w-100" placeholder="Items:">
                      <button class="ms-2 btn" @click="copy(pref.item.diyPrefix + ' ' + selection.splited.diys[index - 1].join(' ')); 
                  selected.diys.splice((index - 1) * pref.item.splitBy, pref.item.splitBy);">
                        <i class="bi-clipboard" aria-hidden="true"></i>
                      </button>
                    </div>
                    <span class="mx-1">{{ selection.splited.diys[index-1].join(" ") }}</span>
                  </li>
                </ul>
                <div class="d-flex gap-2 justify-content-center mb-2">
                  <button type="button" class="btn btn-outline-primary" @click="selection.undo"
                    :disabled="!selection.canUndo">
                    <i class="bi bi-arrow-counterclockwise me-2" aria-hidden="true"></i>Undo
                  </button>
                  <button type="button" class="btn btn-outline-primary" @click="selection.redo"
                    :disabled="!selection.canRedo">
                    <i class="bi bi-arrow-clockwise me-2" aria-hidden="true"></i>Redo
                  </button>
                </div>
                <div class="d-grid gap-2 mb-2" v-if="selected.items.length > 0">
                  <button type="button" class="btn btn-outline-success" @click="nhi.export">
                    <i class="bi-file-earmark-arrow-down me-2" aria-hidden="true"></i> Save current inventory
                  </button>
                </div>
              </div>
            </div>

            <div class="px-3 mb-3 border-bottom" v-if="!loading.any && selection.history.length > 0">
              <h6 class="sidebar-heading d-flex justify-content-between align-items-center mb-1 text-muted">
                <button class="btn p-0 text-muted text-uppercase" type="button" data-bs-toggle="collapse"
                  data-bs-target="#historyCollapse" aria-expanded="false" aria-controls="historyCollapse">
                  History
                </button>
                <button class="ms-2 btn btn-sm" @click="selection.history.splice(0)" aria-label="Clear history">
                  <i class="bi-x" aria-hidden="true"></i>
                </button>
              </h6>
              <ul id="historyCollapse" class="list-group list-group-flush collapse show">
                <li v-for="(ids, i) in selection.history" style="background: inherit;"
                  class="list-group-item px-0 d-flex justify-content-between align-items-center">
                  <span class="mx-1 text-truncate">
                    {{ search.byId(ids[3]).name }}
                    {{ otherInformation(search.byId(ids[3]), ids) }}
                  </span>
                  <button class="ms-2 btn" @click="selection.addHex(ids)">
                    <i class="bi-plus" aria-hidden="true"></i>
                  </button>
                </li>
              </ul>
            </div>

            <div class="px-3 mb-3 border-bottom">
              <h6 class="sidebar-heading d-flex justify-content-between align-items-center mb-1 text-muted">
                <button class="btn p-0 text-muted text-uppercase" type="button" data-bs-toggle="collapse"
                  data-bs-target="#prefCollapse" aria-expanded="false" aria-controls="prefCollapse">
                  Preferences
                </button>
              </h6>

              <ul id="prefCollapse" class="nav flex-column mb-2 collapse show">
                <li class="nav-item my-2 form-check form-switch">
                  <input v-model="pref.showToast" class="form-check-input" type="checkbox" id="show-toast">
                  <label class="form-check-label" for="show-toast">Show Toast</label>
                </li>

                <li class="nav-item my-2 form-check form-switch">
                  <input v-model="pref.preventAlt" class="form-check-input" type="checkbox" id="prevent-alt">
                  <label class="form-check-label" for="prevent-alt">Block Alt key from revealing menu</label>
                </li>

                <li class="nav-item my-2 form-check form-switch">
                  <input v-model="pref.item.diySeparateCmd" class="form-check-input" type="checkbox"
                    id="diy-separate-cmd">
                  <label class="form-check-label" for="diy-separate-cmd">Add DIYs to separate command</label>
                </li>

                <li class="nav-item my-2 row align-items-center">
                  <div class="col-auto">
                    <label class="form-label mb-0" for="split-by">Split By</label>
                  </div>
                  <div class="col-6 flex-grow-1">
                    <label class="visually-hidden" for="split-by">Split By</label>
                    <input v-model="pref.item.splitBy" class="form-control form-control-sm" type="number" id="split-by"
                      min="1" step="1">
                  </div>
                </li>
              </ul>
            </div>

            <footer class="footer mt-auto px-3">
              <h6 class="sidebar-heading d-flex justify-content-between align-items-center mb-1 text-muted">
                <span>Data Source</span>
              </h6>

              <ul class="nav flex-column">
                <li class="nav-item row my-2">
                  <i class="bi-github col-auto" aria-hidden="true"></i>
                  <ol class="breadcrumb col-6 flex-grow-1 mb-0">
                    <li class="breadcrumb-item"><a href="https://github.com/phecdaDia/" target="_blank">phecdaDia</a>
                    </li>
                    <li class="breadcrumb-item"><a href="https://github.com/phecdaDia/ACNH" target="_blank">ACNH</a>
                    </li>
                  </ol>
                </li>
                <li class="nav-item row my-2 d-none">
                  <i class="bi-github col-auto" aria-hidden="true"></i>
                  <ol class="breadcrumb col-6 flex-grow-1 mb-0">
                    <li class="breadcrumb-item"><a href="https://github.com/alexislours/"
                        target="_blank">alexislours</a>
                    </li>
                    <li class="breadcrumb-item"><a href="https://github.com/alexislours/translation-sheet-data"
                        target="_blank">translation-sheet-data</a>
                    </li>
                  </ol>
                </li>
                <li class="nav-item row my-2">
                  <i class="bi-gitlab col-auto" aria-hidden="true"></i>
                  <ol class="breadcrumb col-6 flex-grow-1 mb-0">
                    <li class="breadcrumb-item"><a href="https://gitlab.com/AeonSake2/" target="_blank">AeonSake2</a>
                    </li>
                    <li class="breadcrumb-item"><a href="https://gitlab.com/AeonSake2/acnh-translations"
                        target="_blank">acnh-translations</a>
                    </li>
                  </ol>
                </li>
              </ul>
            </footer>
          </div>
        </nav>

        <main class="col-md-9 ms-sm-auto px-md-4">
          <div
            class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2">{{ title }}</h1>
          </div>

          <form @submit.prevent="return false;">
            <fieldset class="row row-cols-lg-auto g-3 align-items-center mb-3">
              <div class="col-12">
                <label class="visually-hidden" for="languageSelector">Language</label>
                <div class="input-group">
                  <label class="input-group-text" for="languageSelector"><i class="bi-globe"
                      aria-hidden="true"></i></label>
                  <select v-model="pref.language" class="form-select" name="languageSelector">
                    <option value="" disabled selected>Choose...</option>
                    <option v-for="l in languages" :value="l.value">{{ l.text }}</option>
                  </select>
                </div>
              </div>

              <div class="col-12 flex-grow-1">
                <label class="visually-hidden">Search</label>
                <div class="input-group">
                  <label class="input-group-text"><i class="bi-search" aria-hidden="true"></i></label>
                  <input ref="search-box" v-model="search.text" type="text" class="form-control" placeholder="Search"
                    aria-label="search" aria-describedby="search" :disabled="loading.any">
                  <button class="btn btn-outline-info" type="button" data-bs-toggle="collapse"
                    data-bs-target="#default-item-settings" aria-expanded="false" aria-controls="default-item-settings">
                    <i class="bi bi-three-dots-vertical" aria-hidden="true"></i>
                  </button>
                </div>
              </div>
            </fieldset>
            <fieldset id="default-item-settings" class="collapse">
              <div class="row row-cols-lg-auto g-3 align-items-center mb-3">
                <div class="col-12">
                  <label class="visually-hidden text-capitalize">Default wrapping paper</label>
                  <div class="input-group">
                    <label class="input-group-text" for="select-default-wrapping-paper"><i class="bi-gift"
                        aria-hidden="true"></i></label>
                    <select v-model="pref.wrappingPaper.color" id="select-default-wrapping-paper"
                      class="form-select text-capitalize" aria-label="Select wrapping paper">
                      <option selected value="">None</option>
                      <option v-for="option in data.wrappingPaper" :value="option.color">
                        {{ data.getWrappingPaperName(option.internal_name) }}
                      </option>
                    </select>
                  </div>
                </div>
                <div class="col-12" v-if="pref.wrappingPaper.color.length > 0">
                  <div class="form-check">
                    <input v-model="pref.wrappingPaper.withName" class="form-check-input" type="checkbox"
                      id="default-wrapping-paper-with-name">
                    <label class="form-check-label" for="default-wrapping-paper-with-name">
                      With Name
                    </label>
                  </div>
                </div>
                <div class="col-12">
                  <label for="nhi-upload" class="btn btn-outline-secondary">Load Inventory (*.nhi)</label>
                  <input class="d-none" type="file" id="nhi-upload" accept=".nhi" @change="nhi.import">
                </div>
              </div>
            </fieldset>
          </form>

          <div v-if="loading.any" class="d-flex justify-content-center">
            <div class="spinner-border text-info" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
          <div v-else-if="pref.language.length > 0">
            <div v-if="search.text.length > 0 && search.moreThan100" class="alert alert-warning" role="alert">
              Only showing the first 100 results.
            </div>
            <div v-if="search.debouncing" class="d-flex justify-content-center">
              <div class="spinner-border text-info" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>
            <div v-else-if="search.text.length > 0 && search.result.length == 0" class="alert alert-danger"
              role="alert">
              Result not found.
            </div>
            <div id="search-result" class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xxl-4">
              <template v-for="(r, index) in search.result">
                <div class="col">
                  <div class="card border-primary mb-3" style="height: calc(100% - 1rem)">
                    <div class="card-body">
                      <h5 class="card-title text-truncate-2">{{ r.name }} {{ otherInformation(r) }}</h5>
                      <p class="card-text">{{ trimItemId(calculateItemId(r), true) }}</p>
                    </div>
                    <div class="card-footer pt-0">
                      <ul class="nav card-header-tabs flex-nowrap" role="group" aria-label="action button group">
                        <li class="nav-item">
                          <button type="button" :class="['btn', 'btn-lg', copyText == trimItemId(calculateItemId(r)) ? 
                            'text-success' : 'text-primary']" @click="copy(trimItemId(calculateItemId(r)))"
                            data-bs-toggle="tooltip" data-bs-placement="top" title="Copy to clipboard">
                            <i :class="[copyText == trimItemId(calculateItemId(r)) ? 'bi-check' : 'bi-clipboard']"
                              aria-hidden="true"></i>
                          </button>
                        </li>
                        <li class="nav-item">
                          <button type="button" class="btn btn-lg text-primary" @click="selection.add(r)"
                            data-bs-toggle="tooltip" data-bs-placement="top" title="Add to selected">
                            <i class="bi-plus" aria-hidden="true"></i>
                          </button>
                        </li>
                        <li class="nav-item btn-group ms-auto" role="group">
                          <button type="button" class="btn btn-lg text-primary dropdown-toggle"
                            data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
                            <i v-if="!!r.stack" class="bi-123 mx-1" aria-hidden="true" data-bs-toggle="tooltip"
                              data-bs-placement="top" title="Specify count"></i>
                            <i v-if="!!r.durability" class="bi-tools mx-1" aria-hidden="true" data-bs-toggle="tooltip"
                              data-bs-placement="top" title="Specify durability"></i>
                            <i v-if="!!r.variants" class="bi-palette mx-1" aria-hidden="true" data-bs-toggle="tooltip"
                              data-bs-placement="top" title="Specify color variant"></i>
                            <i class="bi-gift mx-1" aria-hidden="true" data-bs-toggle="tooltip" data-bs-placement="top"
                              title="Specify what to wrap with"></i>
                          </button>
                          <div class="dropdown-menu py-2" aria-labelledby="variant selector button group"
                            :style="{width: 'max-content', minWidth: !!r.variants ? 'min(calc(100vw - 32px), 600px)' : 'min(calc(100vw - 32px), 300px)'}">
                            <div :class="['row', 'row-cols-1', 'g-0', {'row-cols-md-2':!!r.variants}]">
                              <div v-if="!!r.variants" class="col p-0">
                                <h5 class="dropdown-header">{{ variantTitle(r) }}</h5>
                                <ul class="list-group list-group-flush">
                                  <li v-for="v in r.variants" class="list-group-item d-flex" aria-current="true">
                                    <div class="flex-grow-1">
                                      <h5 class="mb-1">{{ v.locale[pref.language] }}</h5>
                                      <p class="mb-0">{{ trimItemId(calculateItemId(r, {variantId: v.index}), true) }}
                                      </p>
                                    </div>
                                    <div class="btn-group btn-group-lg ms-2" role="group"
                                      aria-label="variant selector button group">
                                      <button type="button" :class="['btn', copyText == trimItemId(calculateItemId(r, {variantId:
                                        v.index})) ? 'btn-success': 'btn-outline-info']" @click="copy(trimItemId(
                                        calculateItemId(r, {variantId: v.index})))">
                                        <i :class="[copyText == trimItemId(calculateItemId(r, {variantId: v.index})) ?
                                          'bi-check' : 'bi-clipboard']" aria-hidden="true"></i>
                                      </button>
                                      <button type="button" class="btn btn-outline-info" @click="selection.add(r,
                                      {variantId: v.index})">
                                        <i class="bi-plus" aria-hidden="true"></i>
                                      </button>
                                    </div>
                                  </li>
                                </ul>
                              </div>
                              <div class="col p-0">
                                <template v-if="!!r.fabric">
                                  <ul class="list-group list-group-flush">
                                    <li class="list-group-item mb-3">
                                      <label :for="r.internal_name + '-select-fabric'"
                                        class="form-label dropdown-header ps-0">{{
                                        fabricTitle(r) }}</label>
                                      <select v-model="r.fabricSelected" :id="r.internal_name + '-select-fabric'"
                                        class="form-select text-capitalize" :aria-label="'Select ' + fabricTitle(r)">
                                        <option v-for="fabric in r.fabric" :value="fabric.index + ''">
                                          {{ fabric.locale[pref.language] }}
                                        </option>
                                      </select>
                                    </li>
                                  </ul>
                                </template>
                                <h5 class="dropdown-header">Miscellaneous</h5>
                                <ul class="list-group list-group-flush">
                                  <li v-if="!!r.stack" class="list-group-item mb-3">
                                    <div class="d-flex align-items-center">
                                      <label :for="r.internal_name + '-item-count'"
                                        class="form-label mb-0 me-2">Count</label>
                                      <input v-model="r.stack.current" :id="r.internal_name + '-item-count'"
                                        type="number" class="form-control form-control-sm ms-2" min="1"
                                        :max="r.stack.max" step="1" size="2">
                                    </div>
                                    <input v-model="r.stack.current" type="range" class="form-range" min="1"
                                      :max="r.stack.max" step="1">
                                  </li>
                                  <li v-if="!!r.durability" class="list-group-item mb-3">
                                    <div class="d-flex align-items-center">
                                      <label :for="r.internal_name + '-item-count'"
                                        class="form-label mb-0 me-2">Durability</label>
                                      <input v-model="r.durability.current" :id="r.internal_name + '-item-count'"
                                        type="number" class="form-control form-control-sm ms-2" min="1"
                                        :max="r.durability.max" step="1" size="3">
                                    </div>
                                    <input v-model="r.durability.current" type="range" class="form-range" min="1"
                                      :max="r.durability.max" step="1">
                                  </li>
                                  <li class="list-group-item mb-3">
                                    <label :for="r.internal_name + '-select-wrapping-paper'"
                                      class="form-label d-flex justify-content-between">
                                      <span>Wrapping Paper</span>
                                      <img v-if="r.wrappingPaper.color.length > 0" :src="data.getBagPicture(r)"
                                        class="icon" />
                                    </label>
                                    <select v-model="r.wrappingPaper.color"
                                      :id="r.internal_name + '-select-wrapping-paper'"
                                      class="form-select text-capitalize" aria-label="Select wrapping paper">
                                      <option selected value="">None</option>
                                      <option v-for="option in data.wrappingPaper" :value="option.color">
                                        {{ data.getWrappingPaperName(option.internal_name) }}
                                      </option>
                                    </select>
                                  </li>
                                  <li v-if="r.wrappingPaper.color.length > 0" class="list-group-item mb-3">
                                    <div class="form-check">
                                      <input v-model="r.wrappingPaper.withName" class="form-check-input" type="checkbox"
                                        :id="r.internal_name + '-wrapping-paper-with-name'">
                                      <label class="form-check-label"
                                        :for="r.internal_name + '-wrapping-paper-with-name'">
                                        With Name
                                      </label>
                                    </div>
                                  </li>
                                </ul>
                                <div v-if="!r.variants" class="dropdown-divider mt-0 mb-3"></div>
                                <div v-if="!r.variants" class="dropdown-item-text btn-group btn-group-lg ms-2"
                                  role="group" aria-label="variant selector button group">
                                  <button type="button" :class="['btn', copyText == trimItemId(calculateItemId(r)) ? 'btn-success':
                              'btn-outline-info']" @click="copy(trimItemId(calculateItemId(r)))">
                                    <i :class="[copyText == trimItemId(calculateItemId(r)) ? 'bi-check' : 'bi-clipboard']"
                                      aria-hidden="true"></i>
                                  </button>
                                  <button type="button" class="btn btn-outline-info" @click="selection.add(r)">
                                    <i class="bi-plus" aria-hidden="true"></i>
                                  </button>
                                  <button v-if="false" type="button" class="btn btn-outline-info"
                                    @click="selection.add(r,{multiple: true})">
                                    <i class="bi-plus-square-fill" aria-hidden="true"></i>
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </li>
                      </ul>
                    </div>
                    <div v-if="index < 9" :class="['position-absolute', 'top-0', 'start-100', 'translate-middle', 'fs-3', 
                      {'d-none': !altState}]">
                      <span class="badge bg-warning">
                        {{ index + 1 }}
                        <span class="visually-hidden">index</span>
                      </span>
                    </div>
                  </div>
                </div>
                <div v-if="r.DiyRecipe" class="col">
                  <div class="card border-secondary mb-3" style="height: calc(100% - 1rem)">
                    <div class="card-body">
                      <h5 class="card-title text-truncate-2">{{ r.name }} (DIY)</h5>
                      <p class="card-text">{{ trimItemId(calculateItemId(r,
                        {isDiy: true, command : (pref.item.diySeparateCmd ? "diy" : "drop")}), true) }}</p>
                    </div>
                    <div class="card-footer pt-0">
                      <ul class="nav card-header-tabs flex-nowrap" role="group" aria-label="action button group">
                        <li class="nav-item">
                          <button type="button" :class="['btn', 'btn-lg', trimItemId(calculateItemId(r, {isDiy: true, command : 
                            (pref.item.diySeparateCmd ? 'diy' : 'drop')})) == copyText ? 
                            'text-success' : 'text-secondary']" @click="copy(trimItemId(calculateItemId(r, {isDiy: true, 
                              command : (pref.item.diySeparateCmd ? 'diy' : 'drop')})))">
                            <i :class="[trimItemId(calculateItemId(r, {isDiy: true, command : (pref.item.diySeparateCmd ? 
                              'diy' : 'drop')})) == copyText ? 'bi-check' : 'bi-clipboard']" aria-hidden="true"
                              data-bs-toggle="tooltip" data-bs-placement="top" title="Copy to clipboard"></i>
                          </button>
                        </li>
                        <li class="nav-item">
                          <button type="button" class="btn btn-lg text-secondary" @click="selection.add(r, {isDiy: true, 
                           command : (pref.item.diySeparateCmd ? 'diy' : 'drop')})">
                            <i class="bi-plus" aria-hidden="true" data-bs-toggle="tooltip" data-bs-placement="top"
                              title="Add to selected"></i>
                          </button>
                        </li>
                        <li class="nav-item btn-group ms-auto" role="group">
                          <button type="button" class="btn btn-lg text-secondary dropdown-toggle"
                            data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
                            <i class="bi-terminal mx-1" aria-hidden="true" data-bs-toggle="tooltip"
                              data-bs-placement="top" title="Choose which command to drop diys"></i>
                            <i class="bi-gift mx-1" aria-hidden="true" data-bs-toggle="tooltip" data-bs-placement="top"
                              title="Specify what to wrap with"></i>
                          </button>
                          <ul class="dropdown-menu" aria-labelledby="diy option selector button group"
                            style="width: max-content; min-width: 300px;">
                            <li class="dropdown-item-text mb-3">
                              <div class="form-check form-switch">
                                <input v-model="pref.item.diySeparateCmd" class="form-check-input" type="checkbox"
                                  :id="'diy-separate-cmd-for-item-'+ r.internal_name">
                                <label class="form-check-label"
                                  :for="'diy-separate-cmd-for-item-' + r.internal_name">Add DIYs to
                                  separate
                                  command</label>
                              </div>
                              <span class="mt-2 text-secondary">Will use command:
                                <code v-if="pref.item.diySeparateCmd">
                                  {{ pref.item.diyPrefix.length == 0 ? "DIY" : pref.item.diyPrefix }}
                                </code>
                                <code v-else>
                                  {{ pref.item.itemPrefix.length == 0 ? "Item" : pref.item.itemPrefix }}
                                </code>
                              </span>
                            </li>
                            <li class="dropdown-item-text mb-3">
                              <label :for="r.internal_name + '-diy-select-wrapping-paper'"
                                class="form-label d-flex justify-content-between">
                                <span>Wrapping Paper</span>
                                <img v-if="r.wrappingPaper.color.length > 0" :src="data.getBagPicture(r)"
                                  class="icon" />
                              </label>
                              <select v-model="r.wrappingPaper.color"
                                :id="r.internal_name + '-diy-select-wrapping-paper'" class="form-select text-capitalize"
                                aria-label="Select wrapping paper">
                                <option selected value="">None</option>
                                <option v-for="option in data.wrappingPaper" :value="option.color">
                                  {{ data.getWrappingPaperName(option.internal_name) }}
                                </option>
                              </select>
                            </li>

                            <li v-if="r.wrappingPaper.color.length > 0" class="dropdown-item-text mb-3">
                              <div class="form-check">
                                <input v-model="r.wrappingPaper.withName" class="form-check-input" type="checkbox"
                                  value="" :id="r.internal_name + '-diy-wrapping-paper-with-name'">
                                <label class="form-check-label"
                                  :for="r.internal_name + '-diy-wrapping-paper-with-name'">
                                  With Name
                                </label>
                              </div>
                            </li>

                            <li class="dropdown-item-text btn-group btn-group-lg ms-2" role="group"
                              aria-label="variant selector button group">
                              <button type="button"
                                :class="['btn', trimItemId(calculateItemId(r, {isDiy: true, command : 
                          (pref.item.diySeparateCmd ? 'diy' : 'drop')})) == copyText ? 'btn-success': 'btn-outline-info']" @click="copy(trimItemId(calculateItemId(r, {isDiy: true, command : (pref.item.diySeparateCmd ? 'diy' : 
                          'drop')})))">
                                <i :class="[trimItemId(calculateItemId(r, {isDiy: true, command : (pref.item.diySeparateCmd ? 'diy' : 
                            'drop')})) == copyText ? 'bi-check' : 'bi-clipboard']" aria-hidden="true"></i>
                              </button>
                              <button type="button" class="btn btn-outline-info" @click="selection.add(r, {isDiy: 
                          true, command : (pref.item.diySeparateCmd ? 'diy' : 'drop')})">
                                <i class="bi-plus" aria-hidden="true"></i>
                              </button>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </template>
            </div>
          </div>
          <div v-if="search.result.length == 0" class="mt-4">
            <h2 class="h4">Keyboard Shortcuts<i class="bi-keyboard ms-2" aria-hidden="true"></i></h2>
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">Keys</th>
                  <th scope="col">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row"><code>/</code></th>
                  <td>Start searching</td>
                </tr>
                <tr>
                  <th scope="row">Hold <code>Alt</code></th>
                  <td>Reveal first 9 items' order</td>
                </tr>
                <tr>
                  <th scope="row"><code>Alt</code> + <code>[1-9]</code></th>
                  <td>Add [1-9]th items to selected</td>
                </tr>
                <tr>
                  <th scope="row"><code>Alt</code> + <code>C</code></th>
                  <td>Copy first selected command</td>
                </tr>
                <tr>
                  <th scope="row"><code>Alt</code> + <code>D</code></th>
                  <td>Save current inventory</td>
                </tr>
                <tr>
                  <th scope="row"><code>Ctrl</code> + <code>Z</code></th>
                  <td>Undo last insertion to selected</td>
                </tr>
                <tr>
                  <th scope="row"><code>Ctrl</code> + <code>Y</code> (or <code>Ctrl</code> + <code>Shift</code> +
                    <code>Z</code>)
                  </th>
                  <td>Redo last insertion to selected</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div v-if="false" class="d-flex gap-4">
            Note:
            <span class="text-secondary variants-available">Variants Available</span>
            <span class="text-secondary fabrics-available">Fabrics Available</span>
          </div>
          <div class="d-grid gap-2 mt-4">
            <button class="btn btn-outline-secondary" type="button" data-bs-toggle="modal"
              data-bs-target="#importModal">
              <i class="bi-plus-lg me-2" aria-hidden="true"></i> Import from list
            </button>
            <div class="modal fade" id="importModal" tabindex="-1" aria-labelledby="importModalLabel"
              aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <form @submit.prevent="importItems">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="importModalLabel">Import from list</h1>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <div class="mb-3">
                        <label for="importFormControlContent" class="form-label">Please enter the list of items</label>
                        <textarea v-model="importContent" class="form-control" id="importFormControlContent"
                          ref="importFormControlContent" rows="5"></textarea>
                      </div>
                      <div v-if="importFailedItems.length > 0" class="mb-3">
                        The following items have failed to be imported:
                        <ul>
                          <li v-for="name in importFailedItems" style="color: var(--bs-danger)">{{ name }}</li>
                        </ul>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      <button type="submit" class="btn btn-primary">Import</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
            <div class="modal fade" id="changeItemVariantModal" tabindex="-1"
              aria-labelledby="changeItemVariantModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <form v-if="!!changeItem" @submit.prevent="submitChangeItemVariant">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="changeItemVariantModalLabel">{{ changeItem?.name }}</h1>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <ul v-if="changeItemVariants.length > 0" class="list-group list-group-flush">
                        <li class="list-group-item mb-3">
                          <label :for="changeItem.internal_name + '-select-variant'"
                            class="form-label dropdown-header ps-0">{{
                            variantTitle(changeItem) }}</label>
                          <select v-model="changeItem.variantSelected"
                            :id="changeItem.internal_name + '-select-variant'" class="form-select text-capitalize"
                            :aria-label="'Select ' + variantTitle(changeItem)">
                            <option v-for="variant in changeItemVariants" :value="variant.index + ''">
                              {{ variant.locale[pref.language] }}
                            </option>
                          </select>
                        </li>
                      </ul>
                      <ul v-if="changeItemFabrics.length > 0" class="list-group list-group-flush">
                        <li class="list-group-item mb-3">
                          <label :for="changeItem.internal_name + '-select-fabric'"
                            class="form-label dropdown-header ps-0">{{
                            fabricTitle(changeItem) }}</label>
                          <select v-model="changeItem.fabricSelected" :id="changeItem.internal_name + '-select-fabric'"
                            class="form-select text-capitalize" :aria-label="'Select ' + fabricTitle(changeItem)">
                            <option v-for="fabric in changeItemFabrics" :value="fabric.index + ''">
                              {{ fabric.locale[pref.language] }}
                            </option>
                          </select>
                        </li>
                      </ul>
                      <ul class="list-group list-group-flush">
                        <li v-if="!!changeItem.stack" class="list-group-item mb-3">
                          <div class="d-flex align-items-center">
                            <label :for="changeItem.internal_name + '-item-count'"
                              class="form-label mb-0 me-2">Count</label>
                            <input v-model="changeItem.stack.current" :id="changeItem.internal_name + '-item-count'"
                              type="number" class="form-control form-control-sm ms-2" min="1"
                              :max="changeItem.stack.max" step="1" size="2">
                          </div>
                          <input v-model="changeItem.stack.current" type="range" class="form-range" min="1"
                            :max="changeItem.stack.max" step="1">
                        </li>
                        <li v-if="!!changeItem.durability" class="list-group-item mb-3">
                          <div class="d-flex align-items-center">
                            <label :for="changeItem.internal_name + '-item-count'"
                              class="form-label mb-0 me-2">Durability</label>
                            <input v-model="changeItem.durability.current"
                              :id="changeItem.internal_name + '-item-count'" type="number"
                              class="form-control form-control-sm ms-2" min="1" :max="changeItem.durability.max"
                              step="1" size="3">
                          </div>
                          <input v-model="changeItem.durability.current" type="range" class="form-range" min="1"
                            :max="changeItem.durability.max" step="1">
                        </li>
                        <li class="list-group-item mb-3">
                          <label :for="changeItem.internal_name + '-select-wrapping-paper'"
                            class="form-label d-flex justify-content-between">
                            <span>Wrapping Paper</span>
                            <img v-if="changeItem.wrappingPaper.color.length > 0" :src="data.getBagPicture(changeItem)"
                              class="icon" />
                          </label>
                          <select v-model="changeItem.wrappingPaper.color"
                            :id="changeItem.internal_name + '-select-wrapping-paper'"
                            class="form-select text-capitalize" aria-label="Select wrapping paper">
                            <option selected value="">None</option>
                            <option v-for="option in data.wrappingPaper" :value="option.color">
                              {{ data.getWrappingPaperName(option.internal_name) }}
                            </option>
                          </select>
                        </li>
                        <li v-if="changeItem.wrappingPaper.color.length > 0" class="list-group-item mb-3">
                          <div class="form-check">
                            <input v-model="changeItem.wrappingPaper.withName" class="form-check-input" type="checkbox"
                              :id="changeItem.internal_name + '-wrapping-paper-with-name'">
                            <label class="form-check-label"
                              :for="changeItem.internal_name + '-wrapping-paper-with-name'">
                              With Name
                            </label>
                          </div>
                        </li>
                      </ul>
                      <div class="text-center text-secondary">{{ trimItemId(calculateItemId(changeItem, {variantId:
                        changeItem.variantSelected}), true) }}
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                      <button type="button" class="btn btn-danger" @click="removeSelectedItem()"
                        data-bs-dismiss="modal">Delete Item</button>
                      <button type="submit" class="btn btn-primary">Confirm</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>

          </div>
          <div v-if="!loading.any" class="toast-container position-sticky bottom-0 end-0 p-1">
            <template v-if="selected.items.length > 0">
              <div v-for="index in Math.ceil(selected.items.length / pref.item.splitBy)"
                class="toast align-items-center" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="d-flex">
                  <div class="toast-body d-flex align-items-baseline">
                    <input v-model="pref.item.itemPrefix" type="text"
                      class="form-control form-control-sm transparent-textbox" placeholder="Items:"
                      :style="{width: pref.item.itemPrefix.length + 'rem'}">
                    <div class="d-flex flex-wrap">
                      <button v-for="(ids, j) in selection.splited.items[index - 1]" data-bs-toggle="tooltip"
                        data-bs-placement="bottom"
                        :class="['btn', 'px-1', 'py-0', {'variants-available': variantsAvailable(ids), 'fabrics-available': fabricsAvailable(ids)}]"
                        type="button" @click="changeItemVariant(index - 1, j)"
                        :title="search.byId(ids[3]).name + otherInformation(search.byId(ids[3]), ids)">
                        {{ trimItemId(ids) }}</button>
                    </div>
                  </div>
                  <button type="button" class="btn me-2 m-auto" aria-label="Copy"
                    @click="copy(pref.item.itemPrefix + ' ' + 
                  selection.join(selection.splited.items[index - 1])); selected.items.splice((index - 1) * pref.item.splitBy, pref.item.splitBy);">
                    <i class="bi-clipboard" aria-hidden="true"></i>
                  </button>
                  <button type="button" class="btn-close mx-2 my-auto" data-bs-dismiss="toast"
                    aria-label="Close"></button>
                </div>
              </div>
            </template>

            <template v-if="selected.diys.length > 0">
              <div v-for="index in Math.ceil(selected.diys.length / pref.item.splitBy)" class="toast align-items-center"
                role="alert" aria-live="assertive" aria-atomic="true">
                <div class="d-flex">
                  <div class="toast-body d-flex">
                    <input v-model="pref.item.diyPrefix" type="text"
                      class="form-control form-control-sm transparent-textbox" placeholder="DIYs:"
                      :style="{width: pref.item.itemPrefix.length + 'rem'}">
                    <span class="">{{ selection.splited.diys[index-1].join(" ") }}</span>
                  </div>
                  <button type="button" class="btn me-2 m-auto" aria-label="Copy"
                    @click="copy(pref.item.diyPrefix + ' ' + 
                selection.splited.diys[index-1].join(' ')); selected.diys.splice( (index - 1) * pref.item.splitBy, pref.item.splitBy);">
                    <i class="bi-clipboard" aria-hidden="true"></i>
                  </button>
                  <button type="button" class="btn-close mx-2 my-auto" data-bs-dismiss="toast"
                    aria-label="Close"></button>
                </div>
              </div>
            </template>
          </div>
        </main>
      </div>
    </div>
  </div>
</body>

<script src="https://cdn.jsdelivr.net/npm/vue@3.5.13/dist/vue.global.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@vueuse/shared@12.2.0/index.iife.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@vueuse/core@12.2.0/index.iife.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
<script src="main.js" type="module"></script>

</html>